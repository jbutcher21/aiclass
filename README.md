# AI-Class: Senzing Mapping Assistant

This repository contains an AI-ready Senzing Entity Specification and production-ready mapping instructions to guide mapping of source schemata to valid Senzing JSON. It also includes a JSON linter and identifier crosswalk to standardize mappings.

## Prerequisites

This is a hands-on session where you will learn how to map data to Senzing using AI. Each participant should come prepared so we can move quickly and focus on solving your real-world mapping challenges.

What to bring:
- Laptop: each participant needs their own laptop (Mac/Windows).
- AI account: a paid ChatGPT account or another paid AI assistant. Let us know if you already use another provider and want to use it.
- AI app/interface: the ChatGPT app or your preferred AI app. For technical users, it’s fine if you already have an AI chat integrated with VS Code.
- Create a working folder for workshop files (e.g., `~/bootcamp`) and pull this repository into it.
- Your data file: bring a real dataset you want to map (CSV, JSON, etc.). Aim for a representative sample that’s safe to use in class. If you can’t share production data, bring a small, sanitized sample and put it on the bootcamp directory.
- Python 3.7 or later: needed to run the mapping/validation code the AI will generate.
  - Verify: `python3 --version` (or `python --version` on Windows).
- Senzing environment (for final validation): we will load your mapped JSON into Senzing.
  - Install Docker Desktop (Mac/Windows/Linux) and complete the first-run setup.
  - Verify Docker is running: `docker --version` and `docker run hello-world`.
  - Ensure at least 4 GB RAM is allocated to Docker (Settings → Resources).
  - Pull the workshop container image ahead of time: `docker pull senzing/summit-bootcamp-2025`.
  - If you cannot install Docker, let us know in advance; we will provide alternatives during the session.

Notes
- We want you to solve a real problem. Bring a dataset and context so we can map to Senzing in a way that’s meaningful to your use case.
- Keep sensitive data safe. Prefer samples or de-identified subsets when possible.

## What’s Inside

### Documents folder

- [docs/mapping_instructions.md](docs/mapping_instructions.md): master mapping instructions/prompt with rules, templates, and examples.
- [docs/mapping_examples.md](docs/mapping_examples.md): curated reference examples that show correct Senzing JSON patterns.
- [docs/senzing_entity_specification.md](docs/senzing_entity_specification.md): authoritative, AI-ready Senzing Entity Spec (this repo is the source of truth).
- [docs/lint_senzing_json.py](docs/lint_senzing_json.py): JSON schema linter for validating generated Senzing JSON/JSONL.
- [docs/identifier_crosswalk.json](docs/identifier_crosswalk.json): canonical identifier types, aliases, and mapping guidance.
- [docs/identifier_lookup_log.md](docs/identifier_lookup_log.md): template to record curated identifier lookups (no PII).

### Employee Demo (input and expected outputs)

- Path: `employee_demo/`
- Contents:
  - `data/us-small-employee-raw.csv`: sample input data
  - `schema/us-small-employee-schema.csv`: inferred schema (from file_analyzer)
  - `byhand/*`: code and Senzing JSONL generated by hand (current expected result)

### Tools
- File Analyzer (profile files to derive schema and stats):
  - Path: `tools/file_analyzer.py`
  - Purpose: analyze CSV/JSON/Parquet when a schema doesn’t exist; shows attribute name, inferred type, population %, uniqueness %, and top values.
  - Run: `python3 tools/file_analyzer.py -i path/to/data.csv -o path/to/schema.csv`
- Senzing JSON Linter (schema correctness check):
  - Path: `docs/lint_senzing_json.py`
  - Purpose: validates structure of Senzing JSON/JSONL.
  - Run (file): `python3 docs/lint_senzing_json.py path/to/output.jsonl`
  - Run (directory): `python3 docs/lint_senzing_json.py path/to/dir`
- Senzing JSON Analyzer (validate mapped JSONL before loading):
  - Path: `tools/sz_json_analyzer.py`
  - Purpose: validates/inspects Senzing JSON/JSONL; highlights mapped vs unmapped attributes, uniqueness/population, warnings, and errors.
  - Run: `python3 tools/sz_json_analyzer.py -i path/to/output.jsonl -o path/to/report.csv`
  - Docs: https://github.com/senzing-garage/sz-json-analyzer

## Step-by-Step Guide (Senzing Mapping Assistant)

Data Handling Guidance
- Do not upload full datasets to an AI. Share schema extracts, field lists, small samples, or analyzer summaries instead.
- If you don't already have a schema, use the File Analyzer in the tools directory to produce a schema and stats summary, then provide that summary to the assistant during mapping (`tools/file_analyzer.py`).

1) Create a project folder
   - Make a working directory for this class (e.g., `~/senzing-workshop/my-source`).
   - Put your dataset into it (e.g., a `data/` subfolder).
   - No dataset? Copy from the employee demo to get started: copy `employee_demo/data/` and, if desired, `employee_demo/schema/`.

2) If you don’t have a schema: generate one with the File Analyzer
   - Run: `python3 tools/file_analyzer.py -i path/to/data.csv -o path/to/schema.csv`
   - Place the output schema (e.g., `schema.csv`) in your project (e.g., a `schema/` subfolder).
   - If you already have an official schema or data dictionary, skip this step.

3) Start your mapping session (choose one)

   - Option A — Prebuilt GPT (no doc uploads): open [Senzing Mapping Assistant](https://chatgpt.com/g/g-68d471ea99a08191a4fbe2cf42bdc0d1-senzing-mapping-assistant) and click “Help me map my schema or data file.” The mapping docs are preloaded, so proceed to Step 4.

   - Option B — Your AI’s chat interface: create a new project/workspace and load the core references as project documents before you start chatting.
     - Upload these files so the assistant can cite them:
       - `docs/mapping_examples.md`
       - `docs/lint_senzing_json.py`
       - `docs/senzing_entity_specification.md`
     - Paste the contents of `docs/mapping_instructions.md` into the system prompt (or the first message if no system field exists).

   - Option C — IDE workflow (best for complex schemas): open VS Code (or your IDE) on your project folder and connect your AI assistant extension.
     - Pull the same reference files into the workspace. If you don’t have the repo locally, fetch them from these raw URLs:
       ```
       https://raw.githubusercontent.com/jbutcher21/aiclass/main/docs/mapping_instructions.md
       https://raw.githubusercontent.com/jbutcher21/aiclass/main/docs/mapping_examples.md
       https://raw.githubusercontent.com/jbutcher21/aiclass/main/docs/senzing_entity_specification.md
       https://raw.githubusercontent.com/jbutcher21/aiclass/main/docs/lint_senzing_json.py
       ```


4) Map your schema through to code
   - Upload your schema and type go.
   - Collaborate with the assistant to analyze your schema, agree on mappings, produce example JSON/JSONL, and generate a transformer script to emit Senzing JSONL.
   - Answer numbered questions and approve decisions; iterate until the transformer is ready.
   - By the end of this step you should have code. Download it, run it to map your data, and then verify the output with the JSON analyzer in `tools` (`tools/sz_json_analyzer.py`).
   - Tips for collaborating with an AI:
     - Decide crisply: answer numbered questions directly; ask it to restate decisions and keep a short decision log.
     - Ask for a recommendation: when unsure, ask which option aligns with the Senzing spec and why.
     - Correct it when it gets something wrong. Tell it what is wrong and what you you expect it to do. Correct with examples: show one correct and one incorrect example when fixing behavior.
     - Keep context tight: if the thread drifts, repost the key schema snippet and goals.
5) Generate Senzing JSON output
   - Run the transformer you built with the assistant to produce JSONL files.
   - Example: `python3 transform_your_source.py --input path/to/source.csv --output path/to/output.jsonl`
   - Ensure one record per entity with all FEATURES and relationships.
6) Validate outputs
   - Lint for schema correctness first:
     - Local file: `python3 docs/lint_senzing_json.py path/to/output.jsonl`
     - Raw URL (for remote use): https://raw.githubusercontent.com/jbutcher21/aiclass/main/docs/lint_senzing_json.py
   - Then analyze with Senzing JSON Analyzer:
     - `python3 tools/sz_json_analyzer.py -i path/to/output.jsonl -o path/to/report.csv`
     - Shows recognized vs. unmapped features, population and uniqueness percents, and top values post-mapping.

## Important Links (Raw)
- SenzingGPT (ChatGPT): https://chatgpt.com/g/g-679d39f4717c819192476201873ebc21-senzinggpt
- Mapping Instructions: https://raw.githubusercontent.com/jbutcher21/aiclass/main/docs/mapping_instructions.md
- Senzing Entity Spec: https://raw.githubusercontent.com/jbutcher21/aiclass/main/docs/senzing_entity_specification.md
- Linter: https://raw.githubusercontent.com/jbutcher21/aiclass/main/docs/lint_senzing_json.py
- Identifier Crosswalk: https://raw.githubusercontent.com/jbutcher21/aiclass/main/docs/identifier_crosswalk.json
- JSON Analyzer Docs (Senzing Garage): https://github.com/senzing-garage/sz-json-analyzer
