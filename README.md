# AI-Class: Senzing Mapping Assistant

This repository contains an AI-ready Senzing Entity Specification and a production-ready system prompt to guide mapping of source schemata to valid Senzing JSON. It also includes a JSON linter and identifier crosswalk to standardize mappings.

## What’s Inside

### Documents folder

- [docs/system_prompt.md](docs/system_prompt.md): system prompt to load into your AI assistant (authority, operating rules).
- [docs/mapping_rules.md](docs/mapping_rules.md): quick-reference rules, templates, examples; paste alongside your schema as user context.
- [docs/senzing_entity_specification.md](docs/senzing_entity_specification.md): authoritative, AI-ready Senzing Entity Spec (this repo is the source of truth).
- [docs/identifier_crosswalk.json](docs/identifier_crosswalk.json): canonical identifier types, aliases, and mapping guidance.
- [docs/identifier_lookup_log.md](docs/identifier_lookup_log.md): template to record curated identifier lookups (no PII).

### Employee Demo (input and expected outputs)

- Path: `employee_demo/`
- Contents:
  - `data/us-small-employee-raw.csv`: sample input data
  - `schema/us-small-employee-schema.csv`: inferred schema (from file_analyzer)
  - `byhand/*`: code and Senzing JSONL generated by hand (current expected result)

### Tools
- File Analyzer (profile files to derive schema and stats):
  - Path: `tools/file_analyzer.py`
  - Purpose: analyze CSV/JSON/Parquet when a schema doesn’t exist; shows attribute name, inferred type, population %, uniqueness %, and top values.
  - Run: `python3 tools/file_analyzer.py -i path/to/data.csv -o path/to/schema.csv`
 - Senzing JSON Linter (schema correctness check):
   - Path: `tools/lint_senzing_json.py`
   - Purpose: validates structure of Senzing JSON/JSONL.
   - Run (file): `python3 tools/lint_senzing_json.py path/to/output.jsonl`
   - Run (directory): `python3 tools/lint_senzing_json.py path/to/dir`
- Senzing JSON Analyzer (validate mapped JSONL before loading):
  - Path: `tools/sz_json_analyzer.py`
  - Purpose: validates/inspects Senzing JSON/JSONL; highlights mapped vs unmapped attributes, uniqueness/population, warnings, and errors.
  - Run: `python3 tools/sz_json_analyzer.py -i path/to/output.jsonl -o path/to/report.csv`
  - Docs: https://github.com/senzing-garage/sz-json-analyzer

Data Handling Guidance
- Do not upload full datasets to an AI. Share schema extracts, field lists, small samples, or analyzer summaries instead.
- If you don't already have a schema, use the File Analyzer in the tools directory to produce a schema and stats summary, then provide that summary to the assistant during mapping (`tools/file_analyzer.py`).

## Quick Start (Use with your AI of choice)
1) Load the system prompt (system message)
   - Preferred: Use `docs/mapping_instructions-jb.md` as the system prompt.
     - Paste the contents directly into the AI’s “system” message, or provide the raw URL if your AI can fetch it:
       - System Prompt (raw): https://raw.githubusercontent.com/jbutcher21/aiclass/main/docs/mapping_instructions-jb.md
   - If your AI interface cannot fetch from a URL, upload both files so it has full context locally:
     - `docs/senzing_entity_specification.md`
     - `docs/mapping_instructions-jb.md`
2) Supply your source schema as context
   - Provide the actual schema documentation from your data provider (data dictionary, ERD, column descriptions).
     - If it’s published at a URL and your AI can fetch URLs, share the link.
     - Otherwise, upload the schema files directly so the assistant can read them.
   - No schema available? Use the File Analyzer in the tools directory to generate a schema and stats summary, then upload that summary:
     - `python3 tools/file_analyzer.py -i path/to/data.csv -o path/to/schema.csv`
3) Map your schema through to code
   - Tell the assistant: "Use the mapping instructions and begin mapping the schema."
   - Collaborate with the assistant to analyze your schema, agree on mappings, produce example JSON/JSONL, and generate a transformer script to emit Senzing JSONL.
   - Answer numbered questions and approve decisions; iterate until the transformer is ready.
   - By the end of this step you should have code. Download it, run it to map your data, and then verify the output with the JSON analyzer in `tools` (`tools/sz_json_analyzer.py`).
   - Tips for collaborating with an AI:
     - Treat it like an assistant: delegate tasks clearly (analyze schema → propose mapping → show example → transformer code).
     - Decide crisply: answer numbered questions directly; ask it to restate decisions and keep a short decision log.
     - Ask for a recommendation: when unsure, ask which option aligns with the Senzing spec and why.
     - Correct it when it gets something wrong. Tell it what is wrong and what you you expect it to do. Correct with examples: show one correct and one incorrect example when fixing behavior.
     - Keep context tight: if the thread drifts, repost the key schema snippet and goals.
4) Generate Senzing JSON output
   - Run the transformer you built with the assistant to produce JSONL files.
   - Example: `python3 transform_your_source.py --input path/to/source.csv --output path/to/output.jsonl`
   - Ensure one record per entity with all FEATURES and relationships.
5) Validate outputs
   - Lint for schema correctness first:
     - Local file: `python3 tools/lint_senzing_json.py path/to/output.jsonl`
     - Raw URL (for remote use): https://raw.githubusercontent.com/jbutcher21/aiclass/main/tools/lint_senzing_json.py
   - Then analyze with Senzing JSON Analyzer:
     - `python3 tools/sz_json_analyzer.py -i path/to/output.jsonl -o path/to/report.csv`
     - Shows recognized vs. unmapped features, population and uniqueness percents, and top values post-mapping.

Prerequisites (minimal)
- Python 3.8+
- For analyzer table output: `pip install prettytable` (optional)

## Important Links (Raw)
- System Prompt (Mapping Instructions – JB): https://raw.githubusercontent.com/jbutcher21/aiclass/main/docs/mapping_instructions-jb.md
- Alternate System Prompt: https://raw.githubusercontent.com/jbutcher21/aiclass/main/docs/system_prompt.md
- Mapping Rules: https://raw.githubusercontent.com/jbutcher21/aiclass/main/docs/mapping_rules.md
- Senzing Entity Spec: https://raw.githubusercontent.com/jbutcher21/aiclass/main/docs/senzing_entity_specification.md
- Linter: https://raw.githubusercontent.com/jbutcher21/aiclass/main/tools/lint_senzing_json.py
- Identifier Crosswalk: https://raw.githubusercontent.com/jbutcher21/aiclass/main/docs/identifier_crosswalk.json
- JSON Analyzer Docs (Senzing Garage): https://github.com/senzing-garage/sz-json-analyzer
